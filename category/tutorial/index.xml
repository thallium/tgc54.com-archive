<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Tutorial | Thallium54</title><link>https://tgc54.com/category/tutorial/</link><atom:link href="https://tgc54.com/category/tutorial/index.xml" rel="self" type="application/rss+xml"/><description>Tutorial</description><generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><lastBuildDate>Sat, 21 May 2022 09:15:41 -0400</lastBuildDate><image><url>https://tgc54.com/media/icon_hu423b19687c85b10febae54029c442fbf_4135_512x512_fill_lanczos_center_3.png</url><title>Tutorial</title><link>https://tgc54.com/category/tutorial/</link></image><item><title>Fast Static Website Deployment with Cloudflare Workers and Pages</title><link>https://tgc54.com/post/cloudflare-workers-and-pages/</link><pubDate>Sat, 21 May 2022 09:15:41 -0400</pubDate><guid>https://tgc54.com/post/cloudflare-workers-and-pages/</guid><description>&lt;p>If you are developing a simple static website like a blog or wiki, you probably don&amp;rsquo;t really like to play with a hosting service involving a remote repository like GitHub pages. Pushing to the remote repo every time you make changes and waiting for the building process is not that pleasant. With Cloudflare Workers/Pages, you can upload your website directly using &lt;a href="https://developers.cloudflare.com/workers/wrangler/get-started/" target="_blank" rel="noopener">Wrangler&lt;/a>.&lt;/p>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;p>Install Wrangler globally:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm install -g wrangler
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="authentication">Authentication&lt;/h2>
&lt;p>There are two ways of authentication:&lt;/p>
&lt;ol>
&lt;li>If you are using it on your own computer, you can use OAuth in your browser to login by running &lt;code>wrangler login&lt;/code>.&lt;/li>
&lt;li>set &lt;code>CLOUDFLARE_API_TOKEN&lt;/code> and &lt;code>CLOUDFLARE_ACCOUNT_ID&lt;/code> environmental variables.
&lt;ul>
&lt;li>API token can be generated &lt;a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" rel="noopener">here&lt;/a>
&lt;ul>
&lt;li>for workers, you can use the &amp;ldquo;Edit Cloudflare Workers&amp;rdquo; template.&lt;/li>
&lt;li>for pages, follow the offical guice &lt;a href="https://developers.cloudflare.com/pages/how-to/use-direct-upload-with-continuous-integration/#generate-an-api-token" target="_blank" rel="noopener">here&lt;/a>.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>To find your account ID, log in to the Cloudflare dashboard &amp;gt; select your zone in Account Home &amp;gt; find your account ID in Overview under &lt;strong>API&lt;/strong> on the right-side menu.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="cloudflare-workers">Cloudflare Workers&lt;/h2>
&lt;p>Cloudflare Worker is flexible and powerful. You can do much more than hosting website. You websites are stored in the KV storage.&lt;/p>
&lt;p>To deploy your website:&lt;/p>
&lt;ol>
&lt;li>copy &lt;a href="https://github.com/cloudflare/worker-sites-template/blob/wrangler2/wrangler.toml" target="_blank" rel="noopener">wrangler.toml&lt;/a> to your project directory.
&lt;ul>
&lt;li>change &lt;code>bucket&lt;/code> to your website directory, e.g. &lt;code>public&lt;/code> folder for a hugo website.&lt;/li>
&lt;li>optionally, add &lt;code>route = &amp;quot;your-domain.com/*&amp;quot;&lt;/code> to set custom domain/route for your website.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>create &lt;code>src&lt;/code> folder and copy &lt;a href="https://github.com/cloudflare/worker-sites-template/blob/wrangler2/src/index.js" target="_blank" rel="noopener">index.js&lt;/a>&lt;/li>
&lt;li>in the &lt;code>src&lt;/code> folder, run &lt;code>npm i @cloudflare/kv-asset-handler&lt;/code>&lt;/li>
&lt;li>finally, back to the folder where you put &lt;code>wrangler.toml&lt;/code>, run &lt;code>wrangler publish&lt;/code> to deploy your website.&lt;/li>
&lt;/ol>
&lt;h2 id="cloudflare-pages">Cloudflare Pages&lt;/h2>
&lt;p>Cloudflare Pages is meant to replace the website hosting functionality of Workers. It supports lots of front-end framework so you can deploy your front-end application very easily. You can still upload locally with &lt;code>wrangler&lt;/code> but it doesn&amp;rsquo;t work that well (it failed to upload my hugo blog).&lt;/p>
&lt;p>The upload is pretty easy: simple run &lt;code>wrangler pages publish &amp;lt;directory&amp;gt;&lt;/code> and follow the instruction.&lt;/p></description></item></channel></rss>